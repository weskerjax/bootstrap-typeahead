(function(n){"use strict";var t=function(t,i){this._cache={};this.$element=n(t);this.options=n.extend({},n.fn.typeahead.defaults,i);this.itemToString=this.options.itemToString||this.itemToString;this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.select=this.options.select||this.select;this.autoSelect=typeof this.options.autoSelect=="boolean"?this.options.autoSelect:!0;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.source=this.options.source;this.delay=typeof this.options.delay=="number"?this.options.delay:250;this.$menu=n(this.options.menu);this.menuMaxHeight=this.options.menuMaxHeight||0;this.shown=!1;this.listen();this.showHintOnFocus=typeof this.options.showHintOnFocus=="boolean"?this.options.showHintOnFocus:!1},i;t.prototype={constructor:t,itemToString:function(t){return n.map(t,function(n){return n}).join(" | ")},select:function(){var n=this.$menu.find(".active").data("item");return(this.autoSelect||n)&&(this.$element.val(this.updater(n)).change(),this.$element.trigger("selected.typeahead",[n])),this.hide()},updater:function(n){return n.value},setSource:function(n){this.source=n},show:function(){var t=n.extend({},this.$element.position(),{height:this.$element[0].offsetHeight}),i;return i=typeof this.options.scrollHeight=="function"?this.options.scrollHeight.call():this.options.scrollHeight,this.menuMaxHeight&&this.$menu.css({"max-height":this.menuMaxHeight,"overflow-y":"auto"}),this.$menu.insertAfter(this.$element).css({top:t.top+t.height+i,left:t.left}).show().scrollTop(0),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){if(this.query=typeof t!="undefined"&&t!==null?t:this.$element.val()||"",this.query.length<this.options.minLength)return this.shown?this.hide():this;var i=n.proxy(function(){this._cache[this.query]?this.process(this._cache[this.query]):n.isFunction(this.source)?this.source(this.query,n.proxy(this.process,this)):this.source&&this.process(this.source)},this);clearTimeout(this.lookupWorker);this.lookupWorker=setTimeout(i,this.delay)},process:function(t){var i=this;return(t=n.grep(t,function(n){return i.matcher(n)}),t=this.sorter(t),!t.length)?this.shown?this.hide():this:this.options.items==="all"?this.render(t).show():(this._cache[this.query]||(this._cache[this.query]=t),this.render(t.slice(0,this.options.items)).show())},matcher:function(n){return n?~this.itemToString(n).toLowerCase().indexOf(this.query.toLowerCase()):!1},sorter:function(n){for(var r=[],u=[],f=[],t,i;t=n.shift();)i=this.itemToString(t),i.toLowerCase().indexOf(this.query.toLowerCase())?~i.indexOf(this.query)?u.push(t):f.push(t):r.push(t);return r.concat(u,f)},highlighter:function(n){var t=this.itemToString(n),i=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(new RegExp("("+i+")","ig"),function(n,t){return"<b>"+t+"<\/b>"})},render:function(t){var i=this;return t=n(t).map(function(t,r){return t=n(i.options.item).data("item",r),t.find("a").html(i.highlighter(r)),t[0]}),this.autoSelect&&t.first().addClass("active"),this.$menu.html(t),this},next:function(){var i=this.$menu.find(".active").removeClass("active"),t=i.next();t.length||(t=n(this.$menu.find("li")[0]));t.addClass("active");this.menuScrollHandle(t)},prev:function(){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last());n.addClass("active");this.menuScrollHandle(n)},menuScrollHandle:function(n){var t=n.position().top,i=n.height(),r=this.$menu.scrollTop(),u=this.$menu.height(),f;t<1?this.$menu.scrollTop(r+t):t+i>u&&(f=t+i-u,this.$menu.scrollTop(r+f))},listen:function(){this.$element.on("focus",n.proxy(this.focus,this)).on("blur",n.proxy(this.blur,this)).on("keypress",n.proxy(this.keypress,this)).on("keyup",n.proxy(this.keyup,this));if(this.eventSupported("keydown"))this.$element.on("keydown",n.proxy(this.keydown,this));this.$menu.on("click",n.proxy(this.click,this)).on("mouseenter","li",n.proxy(this.mouseenter,this)).on("mouseleave","li",n.proxy(this.mouseleave,this))},destroy:function(){this.$element.data("typeahead",null);this.$element.off("focus").off("blur").off("keypress").off("keyup");this.eventSupported("keydown")&&this.$element.off("keydown");this.$menu.remove()},eventSupported:function(n){var t=n in this.$element;return t||(this.$element.setAttribute(n,"return;"),t=typeof this.$element[n]=="function"),t},move:function(n){if(this.shown){switch(n.keyCode){case 9:case 13:case 27:n.preventDefault();break;case 38:n.preventDefault();this.prev();break;case 40:n.preventDefault();this.next()}n.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~n.inArray(t.keyCode,[40,38,9,13,27]);this.shown||t.keyCode!=40?this.move(t):this.lookup("")},keypress:function(n){this.suppressKeyPressRepeat||this.move(n)},keyup:function(n){switch(n.keyCode){case 40:case 39:case 38:case 37:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}n.stopPropagation();n.preventDefault()},focus:function(){this.focused||(this.focused=!0,(this.options.minLength===0&&!this.$element.val()||this.options.showHintOnFocus)&&this.lookup())},blur:function(){this.focused=!1;!this.mousedover&&this.shown&&this.hide()},click:function(n){n.stopPropagation();n.preventDefault();this.select();this.$element.focus()},mouseenter:function(t){this.mousedover=!0;this.$menu.find(".active").removeClass("active");n(t.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1;!this.focused&&this.shown&&this.hide()}};i=n.fn.typeahead;n.fn.typeahead=function(i){var r=arguments,u=typeof i=="object"&&i;return this.each(function(){var e=n(this),f=e.data("typeahead");f||(f=new t(this,u),e.data("typeahead",f));typeof i=="string"&&(r.length>1?f[i].apply(f,Array.prototype.slice.call(r,1)):f[i]())})};n.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"><\/ul>',item:'<li><a href="#"><\/a><\/li>',minLength:1,scrollHeight:0,autoSelect:!0};n.fn.typeahead.Constructor=t;n.fn.typeahead.noConflict=function(){return n.fn.typeahead=i,this}})(window.jQuery);
//# sourceMappingURL=bootstrap-typeahead.min.js.map
